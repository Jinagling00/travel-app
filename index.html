<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üåä Ê≤ñÁπ©‰πãÊóÖ 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root { --marine-blue: #0369A1; --sand-beige: #F8F5F0; }
        body { font-family: 'Noto Sans TC', sans-serif; background-color: var(--sand-beige); color: #334155; }
        .ocean-gradient { background: linear-gradient(135deg, #075985 0%, #38BDF8 100%); }
        .card-shadow { box-shadow: 0 10px 25px -5px rgba(3, 105, 161, 0.1); }
        .nav-active { color: #0369A1; transform: translateY(-3px); border-bottom: 2px solid #0369A1; }
        .hidden { display: none; }
        input, textarea, select { border-radius: 12px; border: 1px solid #E2E8F0; padding: 10px; font-size: 14px; }
        .day-btn-active { background-color: #0369A1; color: white; transform: scale(1.05); }
        .line-through-text { text-decoration: line-through; color: #94A3B8; }
        .calc-btn { transition: all 0.1s; background: #F1F5F9; font-family: 'Quicksand', sans-serif; font-weight: 700; }
        .calc-btn:active { transform: scale(0.9); background: #E2E8F0; }
    </style>
</head>
<body class="pb-24">

    <header class="ocean-gradient text-white p-6 rounded-b-[40px] sticky top-0 z-50 shadow-lg">
        <div class="flex justify-between items-end">
            <div>
                <h1 class="text-2xl font-bold tracking-tight">Okinawa Trip</h1>
                <p class="text-xs opacity-90">2026/01/24 (ÂÖ≠) - 01/27 (‰∫å)</p>
            </div>
            <div class="bg-white/20 px-3 py-1 rounded-full text-[10px] backdrop-blur-sm">
                üß≥ 00 & Â∞èÂÆá Ê≤ñÁπ©‰πãÊóÖ
            </div>
        </div>
    </header>

    <main id="app" class="p-4 space-y-6">

        <section id="page-plan" class="page-section">
            <div class="bg-white rounded-3xl p-5 card-shadow border border-sky-100 mb-6">
                <div class="flex items-center gap-2 mb-3 text-sky-700 font-bold italic">
                    <i class="fas fa-plane-departure"></i> FLIGHT INFO
                </div>
                <div class="flex justify-between items-center text-sm">
                    <div class="text-center">
                        <div class="font-bold text-slate-700">JX302</div>
                        <div class="text-[10px] text-slate-400">1/24 13:15</div>
                    </div>
                    <div class="flex-1 flex flex-col items-center px-4">
                        <div class="w-full border-t-2 border-dashed border-sky-200 relative">
                            <i class="fas fa-plane absolute -top-2 left-1/2 -translate-x-1/2 text-sky-400 text-xs"></i>
                        </div>
                    </div>
                    <div class="text-center">
                        <div class="font-bold text-slate-700">JX313</div>
                        <div class="text-[10px] text-slate-400">1/27 20:30</div>
                    </div>
                </div>
            </div>

            <div class="flex justify-between gap-2 mb-6">
                <button onclick="switchDay(1)" id="btn-day-1" class="day-btn flex-1 py-3 rounded-2xl bg-white text-slate-500 font-bold shadow-sm text-sm">D1</button>
                <button onclick="switchDay(2)" id="btn-day-2" class="day-btn flex-1 py-3 rounded-2xl bg-white text-slate-500 font-bold shadow-sm text-sm">D2</button>
                <button onclick="switchDay(3)" id="btn-day-3" class="day-btn flex-1 py-3 rounded-2xl bg-white text-slate-500 font-bold shadow-sm text-sm">D3</button>
                <button onclick="switchDay(4)" id="btn-day-4" class="day-btn flex-1 py-3 rounded-2xl bg-white text-slate-500 font-bold shadow-sm text-sm">D4</button>
            </div>

            <div id="day-content" class="space-y-4">
                </div>
            
            <button onclick="editCurrentDay()" class="w-full mt-6 py-3 border-2 border-dashed border-sky-300 text-sky-600 rounded-2xl text-sm font-bold bg-sky-50/50">
                <i class="fas fa-edit mr-1"></i> Á∑®ËºØÊ≠§Êó•Ë°åÁ®ãË≥áË®ä
            </button>
        </section>

        <section id="page-wallet" class="page-section hidden">
            <div class="bg-white rounded-3xl p-5 card-shadow mb-6">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-xs font-bold text-slate-400 uppercase tracking-widest">Calculator</span>
                    <button onclick="toggleTax()" id="tax-btn" class="text-[10px] bg-amber-100 text-amber-600 px-2 py-1 rounded-lg">ÈÄÄÁ®ÖË®àÁÆó (10%)</button>
                </div>
                <div class="bg-slate-50 rounded-2xl p-4 mb-4">
                    <div id="calc-history" class="text-right text-[10px] text-slate-400 h-4"></div>
                    <div id="calc-screen" class="text-right text-2xl font-bold text-slate-700 overflow-x-auto">0</div>
                    <div id="calc-twd" class="text-right text-sm text-sky-600 font-bold mt-1">‚âà NT$ 0</div>
                </div>
                <div class="grid grid-cols-4 gap-2">
                    <button class="calc-btn p-4 rounded-xl text-sky-600" onclick="inputCalc('7')">7</button>
                    <button class="calc-btn p-4 rounded-xl text-sky-600" onclick="inputCalc('8')">8</button>
                    <button class="calc-btn p-4 rounded-xl text-sky-600" onclick="inputCalc('9')">9</button>
                    <button class="calc-btn p-4 rounded-xl text-orange-500" onclick="inputCalc('/')">√∑</button>
                    <button class="calc-btn p-4 rounded-xl text-sky-600" onclick="inputCalc('4')">4</button>
                    <button class="calc-btn p-4 rounded-xl text-sky-600" onclick="inputCalc('5')">5</button>
                    <button class="calc-btn p-4 rounded-xl text-sky-600" onclick="inputCalc('6')">6</button>
                    <button class="calc-btn p-4 rounded-xl text-orange-500" onclick="inputCalc('*')">√ó</button>
                    <button class="calc-btn p-4 rounded-xl text-sky-600" onclick="inputCalc('1')">1</button>
                    <button class="calc-btn p-4 rounded-xl text-sky-600" onclick="inputCalc('2')">2</button>
                    <button class="calc-btn p-4 rounded-xl text-sky-600" onclick="inputCalc('3')">3</button>
                    <button class="calc-btn p-4 rounded-xl text-orange-500" onclick="inputCalc('-')">-</button>
                    <button class="calc-btn p-4 rounded-xl text-sky-600" onclick="inputCalc('0')">0</button>
                    <button class="calc-btn p-4 rounded-xl text-rose-500" onclick="clearCalc()">C</button>
                    <button class="calc-btn p-4 rounded-xl bg-sky-500 text-white" onclick="solveCalc()">=</button>
                    <button class="calc-btn p-4 rounded-xl text-orange-500" onclick="inputCalc('+')">+</button>
                </div>
            </div>

            <div class="bg-white rounded-3xl p-5 card-shadow space-y-3">
                <h3 class="text-sm font-bold text-slate-700 border-b pb-2 mb-2"><i class="fas fa-receipt mr-2"></i>ÂàÜÂ∏≥Ë®òÂ∏≥</h3>
                <input type="text" id="exp-name" placeholder="ÂìÅÈ†ÖÂêçÁ®± (Â¶ÇÔºöÁáíËÇâ)" class="w-full">
                <div class="flex gap-2">
                    <input type="number" id="exp-amount" placeholder="ÈáëÈ°ç (JPY)" class="flex-1">
                    <select id="exp-payer" class="bg-slate-50">
                        <option value="00">00</option>
                        <option value="Â∞èÂÆá">Â∞èÂÆá</option>
                    </select>
                </div>
                <div class="flex items-center gap-2">
                    <select id="exp-method" class="flex-1 bg-slate-50">
                        <option value="ÁèæÈáë">ÁèæÈáë</option>
                        <option value="‰ø°Áî®Âç°">‰ø°Áî®Âç°</option>
                    </select>
                    <label class="flex-1 bg-sky-50 text-sky-600 text-[10px] py-3 rounded-xl text-center font-bold cursor-pointer">
                        <i class="fas fa-camera"></i> ‰∏äÂÇ≥Êî∂Êìö
                        <input type="file" id="exp-photo" class="hidden" accept="image/*" onchange="handleImage(this)">
                    </label>
                </div>
                <div id="photo-preview" class="hidden h-20 w-20 rounded-lg overflow-hidden border"></div>
                <button onclick="addExpense()" class="w-full py-3 bg-sky-600 text-white rounded-2xl font-bold">Ë®òÈåÑÂ∏≥ÁõÆ</button>
            </div>

            <div id="expense-list" class="mt-6 space-y-3 pb-4">
                </div>
        </section>

        <section id="page-lists" class="page-section hidden">
            <div class="mb-8">
                <h3 class="text-sm font-bold text-sky-600 mb-3 flex items-center justify-between">
                    <span><i class="fas fa-suitcase mr-2"></i>Ë°åÂâçÊ∫ñÂÇô</span>
                </h3>
                <div id="list-pre" class="bg-white rounded-2xl p-4 card-shadow space-y-3"></div>
                <div class="mt-3 flex gap-2">
                    <input type="text" id="input-pre" placeholder="Êñ∞Â¢ûÊ∫ñÂÇô‰∫ãÈ†Ö..." class="flex-1">
                    <button onclick="addItem('pre')" class="bg-sky-500 text-white w-10 h-10 rounded-xl"><i class="fas fa-plus"></i></button>
                </div>
            </div>

            <div class="mb-8">
                <h3 class="text-sm font-bold text-amber-600 mb-3"><i class="fas fa-shopping-bag mr-2"></i>ÂøÖË≤∑Ê∏ÖÂñÆ</h3>
                <div id="list-buy" class="bg-white rounded-2xl p-4 card-shadow space-y-3"></div>
                <div class="mt-3 flex gap-2">
                    <input type="text" id="input-buy" placeholder="Êñ∞Â¢ûÊÉ≥Ë≤∑ÁöÑ..." class="flex-1">
                    <button onclick="addItem('buy')" class="bg-amber-500 text-white w-10 h-10 rounded-xl"><i class="fas fa-plus"></i></button>
                </div>
            </div>

            <div class="mb-8">
                <h3 class="text-sm font-bold text-rose-500 mb-3"><i class="fas fa-utensils mr-2"></i>ÂøÖÂêÉÁæéÈ£ü</h3>
                <div id="list-eat" class="bg-white rounded-2xl p-4 card-shadow space-y-3"></div>
                <div class="mt-3 flex gap-2">
                    <input type="text" id="input-eat" placeholder="Êñ∞Â¢ûÁæéÈ£ü..." class="flex-1">
                    <button onclick="addItem('eat')" class="bg-rose-500 text-white w-10 h-10 rounded-xl"><i class="fas fa-plus"></i></button>
                </div>
            </div>
        </section>

        <section id="page-info" class="page-section hidden">
            <div class="mb-8">
                <h3 class="text-sm font-bold text-slate-700 mb-3"><i class="fas fa-sticky-note mr-2"></i>ÂÄã‰∫∫ÂÇôÂøòÈåÑ</h3>
                <textarea id="memo-note" oninput="saveMemo()" placeholder="Ê¢ùÂàóÂºèËº∏ÂÖ•Á≠ÜË®ò..." rows="6" class="w-full card-shadow p-4 bg-white border-0 focus:ring-2 focus:ring-sky-200"></textarea>
            </div>

            <h3 class="text-sm font-bold text-slate-700 mb-4"><i class="fas fa-hotel mr-2"></i>È£ØÂ∫óÂÖ•‰ΩèË≥áË®ä</h3>
            <div id="hotel-list" class="space-y-6">
                </div>
        </section>

    </main>

    <nav class="fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-lg border-t flex justify-around p-3 pb-8 z-50">
        <button class="nav-btn nav-active" onclick="switchTab('plan', this)"><i class="fas fa-calendar-alt text-xl mb-1"></i><p class="text-[10px] font-bold">PLAN</p></button>
        <button class="nav-btn text-slate-400" onclick="switchTab('wallet', this)"><i class="fas fa-wallet text-xl mb-1"></i><p class="text-[10px] font-bold">WALLET</p></button>
        <button class="nav-btn text-slate-400" onclick="switchTab('lists', this)"><i class="fas fa-tasks text-xl mb-1"></i><p class="text-[10px] font-bold">LISTS</p></button>
        <button class="nav-btn text-slate-400" onclick="switchTab('info', this)"><i class="fas fa-info-circle text-xl mb-1"></i><p class="text-[10px] font-bold">INFO</p></button>
    </nav>

    <script>
        // --- Ê†∏ÂøÉË≥áÊñô ---
        const JPY_RATE = 0.21;
        let currentDay = 1;
        let currentImgBase64 = "";

        const hotelData = [
            {
                name: "JR‰πùÂ∑ûÈ£ØÂ∫ó BlossomÈÇ£Èú∏",
                img: "https://images.unsplash.com/photo-1566073771259-6a8506099945?auto=format&fit=crop&w=300&q=80",
                info: "D1 ÂÖ•‰Ωè",
                parking: "1,500 JPY/Êôö (Ê©üÊ¢∞Âºè)",
                time: "15:00 In / 11:00 Out",
                map: "JR Kyushu Hotel Blossom Naha"
            },
            {
                name: "Ê≤ñÁπ©ËíôÁâπÂà© Spa Â∫¶ÂÅáÈÖíÂ∫ó",
                img: "https://images.unsplash.com/photo-1520250497591-112f2f40a3f4?auto=format&fit=crop&w=300&q=80",
                info: "D2 ÂÖ•‰Ωè",
                parking: "500 JPY/Êôö",
                time: "14:00 In / 11:00 Out",
                map: "Hotel Monterey Okinawa Spa and Resort"
            },
            {
                name: "ÊòüÈáéÈõÜÂúò BEB5 Ê≤ñÁπ©ÁÄ®ËâØÂû£",
                img: "https://images.unsplash.com/photo-1571896349842-33c89424de2d?auto=format&fit=crop&w=300&q=80",
                info: "D3 ÂÖ•‰Ωè",
                parking: "ÂÖçË≤ªÂÅúËªä",
                time: "15:00 In / 11:00 Out",
                map: "Hoshino Resorts BEB5 Okinawa Seragaki"
            }
        ];

        const defaultPlan = {
            1: [
                { time: "15:45", spot: "ÊäµÈÅîÊ©üÂ†¥ÂèñËªä", link: "Naha Airport" },
                { time: "18:30", event: "ÊôöÈ§êÔºöEIBUN Êàñ Â∞è„ÇÑ„Åò", link: "Okinawa Soba EIBUN" },
                { time: "20:00", event: "ÂúãÈöõÈÄöËó•Â¶ùÊé°Ë≤∑", link: "Kokusai Dori" }
            ],
            2: [
                { time: "11:00", spot: "Ê≥¢‰∏äÂÆÆÁúãÊµ∑ÂèÉÊãú", link: "Naminoue Shrine" },
                { time: "12:30", spot: "Cerrado Coffee ‚òï", link: "Okinawa Cerrado Coffee" },
                { time: "13:00", spot: "A&W ÁâßÊ∏ØÂ∫óÁî®È§ê", link: "A&W Makiminato" },
                { time: "14:00", spot: "PARCO CITY ÈÄõË°ó", link: "PARCO CITY Okinawa" },
                { time: "17:00", spot: "ÂåóË∞∑ÂÖ¨ÂúíÁúãÂ§ïÈôΩ", link: "Chatan Park Sunset Beach" },
                { time: "18:30", spot: "ÁæéÂúãÊùëÊôöÈ§ê (Â°îÂèØÈ£Ø)", link: "American Village" }
            ],
            3: [
                { time: "11:00", spot: "ÁæéÈ∫óÊµ∑Ê∞¥ÊóèÈ§® (ÂçàÈ§ê)", link: "Okinawa Churaumi Aquarium" },
                { time: "14:00", spot: "Shinmei Coffee ÈªëÁ≥ñÊãøÈêµ", link: "Shinmei Coffee Okinawa" },
                { time: "15:30", spot: "Âè§ÂÆáÂà©Â§ßÊ©ã & ÂøÉÂûãÂ≤©", link: "Kouri Bridge" },
                { time: "16:30", spot: "Âè§ÂÆáÂà©Ëù¶Ëù¶È£ØÂöêÈÆÆ", link: "KOURI SHRIMP" },
                { time: "18:30", spot: "ÊôöÈ§êÔºöÁêâÁêÉ‰πãÁâõ", link: "Ryukyu no Ushi Onna" }
            ],
            4: [
                { time: "10:30", spot: "Ê∞∏Êó∫Â§¢Ê®ÇÂüéÊé°Ë≥º", link: "Aeon Mall Rycom" },
                { time: "12:00", spot: "ÁæéÈ£üË°óÂçàÈ§ê", link: "Aeon Mall Rycom Food Court" },
                { time: "14:45", spot: "ÁÄ®Èï∑Â≥∂ÁúãÈ£õÊ©ü‰∏ãÂçàËå∂", link: "Umikaji Terrace Senagajima" },
                { time: "16:30", spot: "ÈÇÑËªäÂõûÊ©üÂ†¥", link: "Naha Airport" }
            ]
        };

        // --- ÂàùÂßãÂåñË≥áÊñô ---
        let plans = JSON.parse(localStorage.getItem('plans_v4')) || defaultPlan;
        let expenses = JSON.parse(localStorage.getItem('expenses_v4')) || [];
        let lists = JSON.parse(localStorage.getItem('lists_v4')) || { pre: [], buy: [], eat: [] };
        let memo = localStorage.getItem('memo_v4') || "";

        // --- ÂàÜÈ†ÅËàáÂ∞éËà™ ---
        function switchTab(tabId, el) {
            document.querySelectorAll('.page-section').forEach(p => p.classList.add('hidden'));
            document.getElementById(`page-${tabId}`).classList.remove('hidden');
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.add('text-slate-400'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('nav-active'));
            el.classList.add('nav-active');
            el.classList.remove('text-slate-400');
            window.scrollTo(0,0);
        }

        // --- PLAN Ë°åÁ®ãÈÇèËºØ ---
        function switchDay(day) {
            currentDay = day;
            document.querySelectorAll('.day-btn').forEach(b => b.classList.remove('day-btn-active'));
            document.getElementById(`btn-day-${day}`).classList.add('day-btn-active');
            renderPlan();
        }

        function renderPlan() {
            const container = document.getElementById('day-content');
            container.innerHTML = plans[currentDay].map(item => `
                <div class="bg-white p-4 rounded-2xl shadow-sm border border-slate-50 flex justify-between items-center group">
                    <div class="flex gap-4">
                        <span class="text-sky-500 font-bold text-xs pt-1">${item.time}</span>
                        <div>
                            <div class="text-sm font-bold text-slate-700">${item.spot || item.event}</div>
                            <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(item.link)}" target="_blank" class="text-[10px] text-sky-400 flex items-center gap-1 mt-1">
                                <i class="fas fa-location-arrow"></i> Google Maps
                            </a>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function editCurrentDay() {
            const raw = prompt("Á∑®ËºØÊ≠§Êó•Ë°åÁ®ã (JSONÊ†ºÂºèÁ∑®ËºØÔºåËã•‰∏çÊáÇË´ãÂ∞èÂøÉ):", JSON.stringify(plans[currentDay]));
            if (raw) {
                try {
                    plans[currentDay] = JSON.parse(raw);
                    localStorage.setItem('plans_v4', JSON.stringify(plans));
                    renderPlan();
                } catch(e) { alert("Ê†ºÂºèÈåØË™§ÔºÅ"); }
            }
        }

        // --- WALLET Ë®àÁÆóÊ©üÈÇèËºØ ---
        let calcVal = "0";
        function inputCalc(v) {
            if (calcVal === "0") calcVal = v;
            else calcVal += v;
            updateCalc();
        }
        function clearCalc() { calcVal = "0"; document.getElementById('calc-history').innerText = ""; updateCalc(); }
        function solveCalc() {
            try {
                const res = eval(calcVal);
                document.getElementById('calc-history').innerText = calcVal + " =";
                calcVal = String(res);
                updateCalc();
            } catch { calcVal = "Error"; updateCalc(); }
        }
        function toggleTax() {
            const res = eval(calcVal);
            const taxFree = Math.round(res / 1.1);
            alert(`ÈÄÄÁ®ÖÂæåÈáëÈ°ç‰º∞ÁÆó (10%): ¬•${taxFree}`);
        }
        function updateCalc() {
            document.getElementById('calc-screen').innerText = calcVal;
            const res = isNaN(eval(calcVal)) ? 0 : eval(calcVal);
            document.getElementById('calc-twd').innerText = `‚âà NT$ ${Math.round(res * JPY_RATE)}`;
        }

        // --- Ë®òÂ∏≥ÈÇèËºØ ---
        function handleImage(input) {
            const file = input.files[0];
            const reader = new FileReader();
            reader.onload = (e) => {
                const img = new Image();
                img.onload = () => {
                    const canvas = document.createElement('canvas');
                    const scale = 200 / img.width;
                    canvas.width = 200;
                    canvas.height = img.height * scale;
                    canvas.getContext('2d').drawImage(img, 0, 0, canvas.width, canvas.height);
                    currentImgBase64 = canvas.toDataURL('image/jpeg', 0.6);
                    document.getElementById('photo-preview').innerHTML = `<img src="${currentImgBase64}" class="w-full h-full object-cover">`;
                    document.getElementById('photo-preview').classList.remove('hidden');
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function addExpense() {
            const name = document.getElementById('exp-name').value;
            const amount = document.getElementById('exp-amount').value;
            const payer = document.getElementById('exp-payer').value;
            const method = document.getElementById('exp-method').value;
            if (!name || !amount) return alert("Ë´ãÂ°´ÂØ´ÂìÅÈ†ÖËàáÈáëÈ°ç");

            const item = { id: Date.now(), name, amount: parseFloat(amount), payer, method, img: currentImgBase64, date: new Date().toLocaleTimeString() };
            expenses.unshift(item);
            localStorage.setItem('expenses_v4', JSON.stringify(expenses));
            renderExpenses();
            // Reset
            document.getElementById('exp-name').value = "";
            document.getElementById('exp-amount').value = "";
            document.getElementById('photo-preview').classList.add('hidden');
            currentImgBase64 = "";
        }

        function renderExpenses() {
            const list = document.getElementById('expense-list');
            list.innerHTML = expenses.map(e => `
                <div class="bg-white p-3 rounded-2xl shadow-sm border-l-4 ${e.payer === '00' ? 'border-sky-400' : 'border-rose-400'} flex justify-between items-center">
                    <div class="flex items-center gap-3">
                        ${e.img ? `<img src="${e.img}" class="w-10 h-10 rounded-lg">` : `<div class="w-10 h-10 bg-slate-100 rounded-lg flex items-center justify-center text-[10px] text-slate-300">ÁÑ°Âúñ</div>`}
                        <div>
                            <div class="text-xs font-bold text-slate-700">${e.name}</div>
                            <div class="text-[9px] text-slate-400">${e.payer} ‰ªò ¬∑ ${e.method}</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-sm font-bold text-slate-700">¬•${e.amount.toLocaleString()}</div>
                        <div class="text-[9px] text-emerald-500">NT$ ${Math.round(e.amount * JPY_RATE)}</div>
                        <button onclick="deleteExp(${e.id})" class="text-[10px] text-slate-300">Âà™Èô§</button>
                    </div>
                </div>
            `).join('');
        }
        function deleteExp(id) {
            expenses = expenses.filter(x => x.id !== id);
            localStorage.setItem('expenses_v4', JSON.stringify(expenses));
            renderExpenses();
        }

        // --- LISTS Ê∏ÖÂñÆÈÇèËºØ ---
        function renderLists() {
            ['pre', 'buy', 'eat'].forEach(type => {
                const container = document.getElementById(`list-${type}`);
                container.innerHTML = lists[type].map((item, i) => `
                    <div class="flex items-center justify-between group">
                        <div class="flex items-center gap-3" onclick="toggleItem('${type}', ${i})">
                            <i class="${item.done ? 'fas fa-check-circle text-sky-500' : 'far fa-circle text-slate-300'} text-lg"></i>
                            <span class="${item.done ? 'line-through-text' : 'text-slate-600'} text-sm">${item.text}</span>
                        </div>
                        <button onclick="deleteItem('${type}', ${i})" class="text-slate-200 group-hover:text-slate-400"><i class="fas fa-times"></i></button>
                    </div>
                `).join('');
            });
        }
        function addItem(type) {
            const val = document.getElementById(`input-${type}`).value;
            if (!val) return;
            lists[type].push({ text: val, done: false });
            document.getElementById(`input-${type}`).value = "";
            localStorage.setItem('lists_v4', JSON.stringify(lists));
            renderLists();
        }
        function toggleItem(type, i) {
            lists[type][i].done = !lists[type][i].done;
            localStorage.setItem('lists_v4', JSON.stringify(lists));
            renderLists();
        }
        function deleteItem(type, i) {
            lists[type].splice(i, 1);
            localStorage.setItem('lists_v4', JSON.stringify(lists));
            renderLists();
        }

        // --- INFO È£ØÂ∫óËàáÂÇôÂøò ---
        function saveMemo() { localStorage.setItem('memo_v4', document.getElementById('memo-note').value); }
        
        function renderHotels() {
            document.getElementById('hotel-list').innerHTML = hotelData.map(h => `
                <div class="bg-white rounded-3xl overflow-hidden shadow-sm border border-slate-50">
                    <img src="${h.img}" class="w-full h-32 object-cover">
                    <div class="p-4">
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="font-bold text-slate-700">${h.name}</h4>
                            <span class="text-[10px] bg-sky-100 text-sky-600 px-2 py-1 rounded-full">${h.info}</span>
                        </div>
                        <div class="text-[11px] text-slate-500 space-y-1">
                            <p><i class="fas fa-parking w-4"></i> ${h.parking}</p>
                            <p><i class="fas fa-clock w-4"></i> ${h.time}</p>
                        </div>
                        <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(h.map)}" target="_blank" class="block w-full text-center mt-3 py-2 bg-slate-50 text-sky-600 text-xs rounded-xl font-bold">
                            <i class="fas fa-map-marked-alt mr-1"></i> ÂâçÂæÄÂ∞éËà™
                        </a>
                    </div>
                </div>
            `).join('');
        }

        // --- ÂàùÂßãÂåñÂü∑Ë°å ---
        window.onload = () => {
            switchDay(1);
            renderExpenses();
            renderLists();
            renderHotels();
            document.getElementById('memo-note').value = memo;
        };
    </script>
</body>
</html>
